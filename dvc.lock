schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: data/raw/yellow_tripdata_2016-01.csv
      hash: md5
      md5: dbbfeaf3e090c885588085f0f40acc38
      size: 1708674492
    - path: data/raw/yellow_tripdata_2016-02.csv
      hash: md5
      md5: b5403017ef15378aad4d477542065962
      size: 1783554554
    - path: data/raw/yellow_tripdata_2016-03.csv
      hash: md5
      md5: fbc95c81a17ef549e64881a456662460
      size: 1914669757
    - path: src/data/data_ingestion.py
      hash: md5
      md5: fc29e821c58c5af68c0eb5c2ec554490
      size: 1973
    outs:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: dfd723e2f538f5475039d72d42c235d2
      size: 1924079864
  feature_extraction:
    cmd: python src/features/extract_features.py
    deps:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: dfd723e2f538f5475039d72d42c235d2
      size: 1924079864
    - path: src/features/extract_features.py
      hash: md5
      md5: d36fab0657ab25efa6fe895c0f00bdee
      size: 2109
    params:
      params.yaml:
        extract_features.ewm.alpha: 0.4
        extract_features.minibatchkmeans.n_clusters: 30
        extract_features.minibatchkmeans.n_init: 10
        extract_features.minibatchkmeans.random_state: 42
    outs:
    - path: data/processed/features.csv
      hash: md5
      md5: 3428633b0a90029040ce6156042fa2c6
      size: 8367457
    - path: models/kmeans.joblib
      hash: md5
      md5: 564ff14e09f7455ff4d7c27b28a05d3f
      size: 143771
    - path: models/scaler.joblib
      hash: md5
      md5: cf2c91f3d39deba23298c30d93d06ce6
      size: 951
  features_processing:
    cmd: python src/features/feature_processing.py
    deps:
    - path: data/processed/features.csv
      hash: md5
      md5: 3428633b0a90029040ce6156042fa2c6
      size: 8367457
    - path: src/features/feature_processing.py
      hash: md5
      md5: a5aedb5acb5ce31cdae339280370e010
      size: 1083
    outs:
    - path: data/processed/test_data.csv
      hash: md5
      md5: 76c76e515caa0fcd476487b3ca79b823
      size: 4940946
    - path: data/processed/train_data.csv
      hash: md5
      md5: b3685261357c2d942fb628536c6bc816
      size: 9464526
  training_phase:
    cmd: python src/models/train.py
    deps:
    - path: data/processed/train_data.csv
      hash: md5
      md5: b3685261357c2d942fb628536c6bc816
      size: 9464526
    - path: src/models/train.py
      hash: md5
      md5: 717fef8ae078fe99977454e8ce9a7206
      size: 1213
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 1df0e85c655face05e06343578a72fb9
      size: 1209
    - path: models/transformer.joblib
      hash: md5
      md5: 8a8e1898402107547d21347d94abb392
      size: 3224
  evaluation_phase:
    cmd: python src/models/evaluation.py
    deps:
    - path: data/processed/test_data.csv
      hash: md5
      md5: 76c76e515caa0fcd476487b3ca79b823
      size: 4940946
    - path: data/processed/train_data.csv
      hash: md5
      md5: b3685261357c2d942fb628536c6bc816
      size: 9464526
    - path: models/model.joblib
      hash: md5
      md5: 1df0e85c655face05e06343578a72fb9
      size: 1209
    - path: models/transformer.joblib
      hash: md5
      md5: 8a8e1898402107547d21347d94abb392
      size: 3224
    - path: src/models/evaluation.py
      hash: md5
      md5: 18c8c4f99173d9ba9709e5729ec9dffc
      size: 2615
    outs:
    - path: run_information.json
      hash: md5
      md5: 2551ff05025005450442db5413a9c749
      size: 175
  register_model:
    cmd: python src/models/register_model.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 2551ff05025005450442db5413a9c749
      size: 175
    - path: src/models/register_model.py
      hash: md5
      md5: 2ea1fc380fce97f64a44d0e77f16089b
      size: 705
